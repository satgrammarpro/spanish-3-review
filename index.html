<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanish 3 Fun Mastery - Track Your Progress! üéâ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            background-attachment: fixed;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            box-shadow: 0 25px 70px rgba(0,0,0,0.4);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #48dbfb 100%);
            color: white;
            padding: 50px;
            text-align: center;
            position: relative;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .nav-tabs {
            display: flex;
            background: #fff5e6;
            overflow-x: auto;
            border-bottom: 4px solid #ff6b6b;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 18px 25px;
            cursor: pointer;
            background: #ffe5b4;
            border: none;
            font-size: 16px;
            font-weight: 700;
            color: #333;
            transition: all 0.3s;
            white-space: nowrap;
            border-right: 2px solid #ffd699;
        }

        .nav-tab:hover {
            background: #ffd699;
            transform: translateY(-3px);
        }

        .nav-tab.active {
            background: white;
            color: #ff6b6b;
            border-bottom: 4px solid #ff6b6b;
        }

        .content {
            padding: 40px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .vocab-card {
            background: linear-gradient(135deg, #fff9e6 0%, #ffe6f2 100%);
            border-radius: 15px;
            padding: 25px;
            border-left: 6px solid #ff6b6b;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .vocab-card:hover {
            transform: translateY(-8px) rotate(2deg);
            box-shadow: 0 12px 24px rgba(255, 107, 107, 0.3);
        }

        .vocab-card.mastered {
            border-left-color: #20bf6b;
            background: linear-gradient(135deg, #d4edda 0%, #c3f9d5 100%);
            animation: celebration 0.5s;
        }

        @keyframes celebration {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .vocab-card .spanish {
            font-size: 1.5em;
            font-weight: 800;
            color: #ff6b6b;
            margin-bottom: 12px;
        }

        .vocab-card.mastered .spanish {
            color: #20bf6b;
        }

        .vocab-card .english {
            color: #555;
            font-size: 1.2em;
            display: none;
            font-weight: 600;
        }

        .vocab-card.revealed .english {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .vocab-card .reveal-hint {
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 1.1em;
            color: #999;
        }

        .vocab-card.mastered .reveal-hint::after {
            content: ' ‚úÖ';
            font-size: 1.3em;
        }

        .section-intro {
            background: linear-gradient(135deg, #feca57 0%, #48dbfb 100%);
            padding: 35px;
            border-radius: 20px;
            margin-bottom: 35px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        }

        .section-intro h2 {
            font-size: 2.3em;
            margin-bottom: 12px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .section-intro p {
            font-size: 1.1em;
            color: white;
            font-weight: 600;
        }

        .score-display {
            position: fixed;
            top: 25px;
            right: 25px;
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
            padding: 18px 30px;
            border-radius: 60px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            font-weight: 700;
            color: white;
            z-index: 1000;
            font-size: 1.1em;
        }

        .quiz-container {
            background: linear-gradient(135deg, #fff9e6 0%, #e6f7ff 100%);
            border-radius: 20px;
            padding: 35px;
            margin: 25px 0;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border: 4px solid #48dbfb;
        }

        .quiz-question {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 25px;
            font-weight: 700;
        }

        .quiz-input {
            width: 100%;
            padding: 18px;
            border: 4px solid #feca57;
            border-radius: 12px;
            font-size: 1.2em;
            margin: 18px 0;
            font-weight: 600;
        }

        .quiz-input:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.3);
        }

        .quiz-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            padding: 18px 45px;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin: 12px 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .quiz-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 107, 107, 0.4);
        }

        .quiz-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .feedback {
            margin-top: 25px;
            padding: 25px;
            border-radius: 15px;
            font-weight: 700;
            display: none;
            font-size: 1.2em;
        }

        .feedback.correct {
            background: linear-gradient(135deg, #20bf6b 0%, #0fb973 100%);
            color: white;
            border: 4px solid #20bf6b;
            display: block;
        }

        .feedback.incorrect {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: 4px solid #ff6b6b;
            display: block;
        }

        .feedback.hint {
            background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%);
            color: white;
            border: 4px solid #feca57;
            display: block;
        }

        .controls {
            margin: 25px 0;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #48dbfb 0%, #0abde3 100%);
            color: white;
            border: none;
            padding: 14px 35px;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(72, 219, 251, 0.4);
        }

        .btn-reset {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            padding: 14px 35px;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .btn-reset:hover {
            background: linear-gradient(135deg, #ee5a6f 0%, #c23616 100%);
        }

        .search-box {
            width: 100%;
            padding: 18px;
            border: 4px solid #48dbfb;
            border-radius: 12px;
            font-size: 1.1em;
            margin-bottom: 25px;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 15px;
            background: #f0f0f0;
            border-radius: 10px;
            margin: 25px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #20bf6b 0%, #0fb973 50%, #01a3a4 100%);
            transition: width 0.5s;
            box-shadow: 0 0 10px rgba(32, 191, 107, 0.5);
        }

        .stats-banner {
            background: linear-gradient(135deg, #20bf6b 0%, #01a3a4 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }

        .stats-banner h3 {
            font-size: 1.8em;
            margin-bottom: 12px;
        }

        .quiz-results {
            background: linear-gradient(135deg, #fff9e6 0%, #e6f7ff 100%);
            padding: 35px;
            border-radius: 20px;
            margin: 25px 0;
            border: 4px solid #48dbfb;
        }

        .quiz-results h3 {
            font-size: 2em;
            color: #333;
            margin-bottom: 20px;
        }

        .wrong-answer-item {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 12px;
            border-left: 5px solid #ff6b6b;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }

        .wrong-answer-item .question {
            font-size: 1.3em;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .wrong-answer-item .your-answer {
            color: #ff6b6b;
            font-weight: 600;
        }

        .wrong-answer-item .correct-answer {
            color: #20bf6b;
            font-weight: 700;
        }

        .preterite-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .preterite-table th, .preterite-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .preterite-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .preterite-table td {
            background: white;
            color: #333;
            font-size: 1.1em;
        }

        .preterite-table tr:hover td {
            background: #f8f9fa;
        }

        .conjugation-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 15px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .conjugation-card h4 {
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        .conjugation-card p {
            font-size: 1.1em;
            line-height: 1.8;
            margin: 10px 0;
        }

        .conjugation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .conjugation-item {
            background: rgba(255,255,255,0.25);
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1em;
            backdrop-filter: blur(10px);
        }

        .conjugation-item strong {
            display: block;
            margin-bottom: 5px;
            font-size: 1.05em;
        }

        @media (max-width: 768px) {
            .vocab-grid {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 2em;
            }

            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="score-display">
        üéØ Mastered: <span id="mastered">0</span> / <span id="total-words">489</span>
    </div>

    <div class="container">
        <header>
            <h1>üåü Spanish 3 Fun Mastery! üåü</h1>
            <p style="font-size: 1.3em; font-weight: 600;">Track Your Progress & Ace Those Tryouts! üöÄ</p>
        </header>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('all-vocab')">üìö All Vocabulary</button>
            <button class="nav-tab" onclick="showSection('preterite')">‚è∞ Pret√©rito</button>
            <button class="nav-tab" onclick="showSection('regular-verbs')">‚úèÔ∏è Regular Verbs</button>
            <button class="nav-tab" onclick="showSection('stem-changing')">üîÑ Stem-Changing</button>
            <button class="nav-tab" onclick="showSection('irregular')">‚ö° Irregular</button>
            <button class="nav-tab" onclick="showSection('reflexive')">ü™û Reflexive</button>
            <button class="nav-tab" onclick="showSection('body')">üë§ Body Parts</button>
            <button class="nav-tab" onclick="showSection('food')">üçï Food</button>
            <button class="nav-tab" onclick="showSection('clothes')">üëï Clothing</button>
            <button class="nav-tab" onclick="showSection('places')">üèõÔ∏è Places</button>
            <button class="nav-tab" onclick="showSection('chores')">üßπ Chores</button>
            <button class="nav-tab" onclick="showSection('sports')">‚öΩ Sports</button>
            <button class="nav-tab" onclick="showSection('party')">üéâ Party</button>
            <button class="nav-tab" onclick="showSection('expressions')">üí¨ Expressions</button>
            <button class="nav-tab" onclick="showSection('quiz-mode')">üéÆ Quiz Mode</button>
        </div>

        <div class="content">
            <!-- All Vocabulary Section -->
            <div id="all-vocab" class="section active">
                <div class="section-intro">
                    <h2>üìö All Vocabulary - Master Them All!</h2>
                    <p>Click to reveal ‚Ä¢ Double-click to mark as mastered! Mastered words won't appear in quizzes! ‚ú®</p>
                </div>

                <div class="stats-banner">
                    <h3>üìä Your Amazing Progress!</h3>
                    <p style="font-size: 1.2em;">Mastered: <strong><span id="mastered-count">0</span></strong> words | Quiz Score: <strong><span id="total-quiz-score">0/0</span></strong></p>
                </div>

                <input type="text" class="search-box" id="search-all" placeholder="üîç Search any word..." onkeyup="searchVocab('all')">

                <div class="progress-bar">
                    <div class="progress-fill" id="progress-all" style="width: 0%"></div>
                </div>

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('all')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('all')">üôà Hide All</button>
                    <button class="btn-secondary" onclick="shuffleCards('all')">üîÄ Shuffle</button>
                    <button class="btn-reset" onclick="resetProgress()">üîÑ Reset Progress</button>
                </div>

                <div class="vocab-grid" id="vocab-all"></div>
            </div>

            <!-- Pret√©rito Section (keeping same structure) -->
            <div id="preterite" class="section">
                <div class="section-intro">
                    <h2>‚è∞ Pret√©rito (Preterite) Tense</h2>
                    <p>Master all past tense conjugations!</p>
                </div>

                <div class="conjugation-card">
                    <h4>Regular -AR, -ER, -IR Endings</h4>
                    <table class="preterite-table">
                        <tr>
                            <th>Subject</th>
                            <th>-AR</th>
                            <th>-ER / -IR</th>
                        </tr>
                        <tr>
                            <td><strong>Yo</strong></td>
                            <td>-√©</td>
                            <td>-√≠</td>
                        </tr>
                        <tr>
                            <td><strong>T√∫</strong></td>
                            <td>-aste</td>
                            <td>-iste</td>
                        </tr>
                        <tr>
                            <td><strong>√âl/Ella/Ud.</strong></td>
                            <td>-√≥</td>
                            <td>-i√≥</td>
                        </tr>
                        <tr>
                            <td><strong>Nosotros</strong></td>
                            <td>-amos</td>
                            <td>-imos</td>
                        </tr>
                        <tr>
                            <td><strong>Vosotros</strong></td>
                            <td>-asteis</td>
                            <td>-isteis</td>
                        </tr>
                        <tr>
                            <td><strong>Ellos/Ellas/Uds.</strong></td>
                            <td>-aron</td>
                            <td>-ieron</td>
                        </tr>
                    </table>
                </div>

                <div class="conjugation-card">
                    <h4>SER & IR (Identical)</h4>
                    <div class="conjugation-grid">
                        <div class="conjugation-item"><strong>Yo:</strong> fui</div>
                        <div class="conjugation-item"><strong>T√∫:</strong> fuiste</div>
                        <div class="conjugation-item"><strong>√âl/Ella/Ud.:</strong> fue</div>
                        <div class="conjugation-item"><strong>Nosotros:</strong> fuimos</div>
                        <div class="conjugation-item"><strong>Vosotros:</strong> fuisteis</div>
                        <div class="conjugation-item"><strong>Ellos/Uds.:</strong> fueron</div>
                    </div>
                </div>

                <!-- Keeping all other conjugation cards same structure -->
            </div>

            <!-- Other sections with same structure -->
            <div id="regular-verbs" class="section">
                <div class="section-intro">
                    <h2>‚úèÔ∏è Regular Verbs (89 Total)</h2>
                    <p>Click to reveal ‚Ä¢ Double-click to master!</p>
                </div>

                <input type="text" class="search-box" id="search-regular" placeholder="üîç Search verbs..." onkeyup="searchVocab('regular')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('regular')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('regular')">üôà Hide All</button>
                    <button class="btn-secondary" onclick="shuffleCards('regular')">üîÄ Shuffle</button>
                </div>

                <div class="vocab-grid" id="vocab-regular"></div>
            </div>

            <div id="stem-changing" class="section">
                <div class="section-intro">
                    <h2>üîÑ Stem-Changing Verbs</h2>
                    <p>e‚Üíie, o‚Üíue, e‚Üíi changes</p>
                </div>

                <input type="text" class="search-box" id="search-stem" placeholder="üîç Search verbs..." onkeyup="searchVocab('stem')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('stem')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('stem')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-stem"></div>
            </div>

            <div id="irregular" class="section">
                <div class="section-intro">
                    <h2>‚ö° Irregular Verbs</h2>
                    <p>Master the tricky ones!</p>
                </div>

                <input type="text" class="search-box" id="search-irregular" placeholder="üîç Search verbs..." onkeyup="searchVocab('irregular')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('irregular')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('irregular')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-irregular"></div>
            </div>

            <div id="reflexive" class="section">
                <div class="section-intro">
                    <h2>ü™û Reflexive Verbs</h2>
                    <p>Verbs with reflexive pronouns</p>
                </div>

                <input type="text" class="search-box" id="search-reflexive" placeholder="üîç Search verbs..." onkeyup="searchVocab('reflexive')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('reflexive')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('reflexive')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-reflexive"></div>
            </div>

            <div id="body" class="section">
                <div class="section-intro">
                    <h2>üë§ Body Parts</h2>
                    <p>El cuerpo humano</p>
                </div>

                <input type="text" class="search-box" id="search-body" placeholder="üîç Search body parts..." onkeyup="searchVocab('body')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('body')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('body')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-body"></div>
            </div>

            <div id="food" class="section">
                <div class="section-intro">
                    <h2>üçï Food, Drinks & Utensils</h2>
                    <p>Everything delicious!</p>
                </div>

                <input type="text" class="search-box" id="search-food" placeholder="üîç Search food..." onkeyup="searchVocab('food')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('food')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('food')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-food"></div>
            </div>

            <div id="clothes" class="section">
                <div class="section-intro">
                    <h2>üëï Clothing</h2>
                    <p>La ropa - dress to impress!</p>
                </div>

                <input type="text" class="search-box" id="search-clothes" placeholder="üîç Search clothing..." onkeyup="searchVocab('clothes')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('clothes')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('clothes')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-clothes"></div>
            </div>

            <div id="places" class="section">
                <div class="section-intro">
                    <h2>üèõÔ∏è Places</h2>
                    <p>Lugares around town</p>
                </div>

                <input type="text" class="search-box" id="search-places" placeholder="üîç Search places..." onkeyup="searchVocab('places')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('places')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('places')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-places"></div>
            </div>

            <div id="chores" class="section">
                <div class="section-intro">
                    <h2>üßπ Household Chores</h2>
                    <p>Quehaceres dom√©sticos</p>
                </div>

                <input type="text" class="search-box" id="search-chores" placeholder="üîç Search chores..." onkeyup="searchVocab('chores')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('chores')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('chores')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-chores"></div>
            </div>

            <div id="sports" class="section">
                <div class="section-intro">
                    <h2>‚öΩ Sports & Equipment</h2>
                    <p>Get active with vocab!</p>
                </div>

                <input type="text" class="search-box" id="search-sports" placeholder="üîç Search sports..." onkeyup="searchVocab('sports')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('sports')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('sports')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-sports"></div>
            </div>

            <div id="party" class="section">
                <div class="section-intro">
                    <h2>üéâ Party Vocabulary</h2>
                    <p>Celebrate in Spanish!</p>
                </div>

                <input type="text" class="search-box" id="search-party" placeholder="üîç Search party vocab..." onkeyup="searchVocab('party')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('party')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('party')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-party"></div>
            </div>

            <div id="expressions" class="section">
                <div class="section-intro">
                    <h2>üí¨ Expressions & Phrases</h2>
                    <p>TENER, ESTAR & more!</p>
                </div>

                <input type="text" class="search-box" id="search-expressions" placeholder="üîç Search expressions..." onkeyup="searchVocab('expressions')">

                <div class="controls">
                    <button class="btn-secondary" onclick="revealAll('expressions')">üëÅÔ∏è Reveal All</button>
                    <button class="btn-secondary" onclick="hideAll('expressions')">üôà Hide All</button>
                </div>

                <div class="vocab-grid" id="vocab-expressions"></div>
            </div>

            <!-- Enhanced Quiz Mode -->
            <div id="quiz-mode" class="section">
                <div class="section-intro">
                    <h2>üéÆ Quiz Mode - Test Your Skills!</h2>
                    <p>Smart hints & feedback! Mastered words are excluded automatically! üåü</p>
                </div>

                <div id="quiz-active" style="display: block;">
                    <div class="quiz-container">
                        <div class="quiz-question" id="quiz-question">Ready to start? Click "Next Question"! üöÄ</div>
                        <input type="text" class="quiz-input" id="quiz-answer" placeholder="Type your answer..." onkeypress="handleEnter(event)">
                        <button class="quiz-btn" id="check-btn" onclick="checkQuizAnswer()" disabled>‚úÖ Check Answer</button>
                        <button class="quiz-btn" id="next-btn" onclick="nextQuestion()" disabled>‚û°Ô∏è Next Question</button>
                        <button class="quiz-btn" style="background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%);" onclick="finishQuiz()">üèÅ Finish Quiz</button>
                        <div id="quiz-feedback" class="feedback"></div>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="quiz-progress" style="width: 0%"></div>
                    </div>

                    <p style="text-align: center; font-size: 1.4em; margin-top: 25px; font-weight: 700;">
                        Quiz Progress: <span style="color: #20bf6b;"><span id="quiz-score">0</span></span> / <span id="quiz-total">0</span>
                        <br>
                        <span style="font-size: 0.95em; color: #666;">Accuracy: <span id="quiz-accuracy">0%</span></span>
                    </p>
                </div>

                <!-- Quiz Results Section -->
                <div id="quiz-results" style="display: none;">
                    <div class="quiz-results">
                        <h3>üéâ Quiz Complete!</h3>
                        <p style="font-size: 1.5em; margin: 20px 0;">
                            Final Score: <strong style="color: #20bf6b;"><span id="final-score">0</span>/<span id="final-total">0</span></strong>
                            (<span id="final-accuracy">0</span>%)
                        </p>

                        <div id="wrong-answers-section" style="margin: 30px 0;">
                            <h3 style="color: #ff6b6b; margin-bottom: 20px;">‚ùå Words to Review (<span id="wrong-count">0</span>)</h3>
                            <div id="wrong-answers-list"></div>
                        </div>

                        <div style="text-align: center; margin-top: 30px;">
                            <button class="quiz-btn" onclick="redoQuiz()">üîÑ Redo Entire Quiz</button>
                            <button class="quiz-btn" style="background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%);" onclick="practiceWrongAnswers()">üìù Practice Wrong Answers</button>
                            <button class="quiz-btn" style="background: linear-gradient(135deg, #48dbfb 0%, #0abde3 100%);" onclick="backToQuiz()">üè† Start New Quiz</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Vocabulary data (keeping same data structure)
        const vocabData = {
            regularVerbs: [
                {sp: "ahorrar", en: "to save (money, food, etc)"},
                {sp: "aplaudir", en: "to applaud"},
                {sp: "alquilar", en: "to rent"},
                {sp: "apagar", en: "to turn off (lights, TV, etc)"},
                {sp: "arreglar", en: "to fix"},
                {sp: "ayudar", en: "to help"},
                {sp: "bajar", en: "to go down"},
                {sp: "besar", en: "to kiss"},
                {sp: "buscar", en: "to look for"},
                {sp: "cambiar", en: "to change"},
                {sp: "caminar", en: "to walk"},
                {sp: "cantar", en: "to sing"},
                {sp: "comprar", en: "to buy"},
                {sp: "contestar", en: "to answer, to reply"},
                {sp: "cuidar", en: "to take care of"},
                {sp: "celebrar", en: "to celebrate"},
                {sp: "cenar", en: "to have dinner"},
                {sp: "cocinar", en: "to cook"},
                {sp: "descansar", en: "to rest"},
                {sp: "desear", en: "to wish"},
                {sp: "disfrutar", en: "to enjoy"},
                {sp: "empujar", en: "to push"},
                {sp: "entregar", en: "to hand in, to give out"},
                {sp: "escuchar", en: "to listen"},
                {sp: "esperar", en: "to wait for"},
                {sp: "esquiar", en: "to ski"},
                {sp: "estudiar", en: "to study"},
                {sp: "estacionar", en: "to park (a car, truck, etc)"},
                {sp: "explicar", en: "to explain"},
                {sp: "limpiar", en: "to clean"},
                {sp: "ganar", en: "to earn"},
                {sp: "gritar", en: "to yell"},
                {sp: "firmar", en: "to sign"},
                {sp: "manejar", en: "to drive"},
                {sp: "hablar", en: "to talk, to speak"},
                {sp: "mandar", en: "to send"},
                {sp: "invitar", en: "to invite"},
                {sp: "mirar", en: "to see, to look"},
                {sp: "lavar", en: "to wash"},
                {sp: "necesitar", en: "to need"},
                {sp: "llamar", en: "to call (someone)"},
                {sp: "nadar", en: "to swim"},
                {sp: "llorar", en: "to cry"},
                {sp: "olvidar", en: "to forget"},
                {sp: "llegar", en: "to arrive"},
                {sp: "pagar", en: "to pay"},
                {sp: "llevar", en: "to carry, to take something/someone"},
                {sp: "parar", en: "to stop"},
                {sp: "mascar", en: "to chew"},
                {sp: "pasar", en: "to pass (by)"},
                {sp: "patinar", en: "to roller skate"},
                {sp: "pintar", en: "to color, to paint"},
                {sp: "preguntar", en: "to ask"},
                {sp: "practicar", en: "to practice"},
                {sp: "preparar", en: "to prepare"},
                {sp: "quemar", en: "to burn"},
                {sp: "regalar", en: "to give something as a present"},
                {sp: "regresar", en: "to come back, to return"},
                {sp: "repasar", en: "to review"},
                {sp: "tomar", en: "to drink, to take"},
                {sp: "trabajar", en: "to work"},
                {sp: "sacar", en: "to take out"},
                {sp: "saludar", en: "to greet"},
                {sp: "tocar", en: "to touch, to play an instrument"},
                {sp: "trotar", en: "to jog"},
                {sp: "aprender", en: "to learn"},
                {sp: "beber", en: "to drink"},
                {sp: "comer", en: "to eat"},
                {sp: "comprender", en: "to understand"},
                {sp: "correr", en: "to run"},
                {sp: "deber", en: "must, should"},
                {sp: "leer", en: "to read"},
                {sp: "meter", en: "to put in"},
                {sp: "prometer", en: "to promise"},
                {sp: "prender", en: "to turn on"},
                {sp: "responder", en: "to answer, to reply"},
                {sp: "romper", en: "to break"},
                {sp: "vender", en: "to sell"},
                {sp: "toser", en: "to cough"},
                {sp: "abrir", en: "to open"},
                {sp: "asistir", en: "to attend"},
                {sp: "decidir", en: "to decide"},
                {sp: "escribir", en: "to write"},
                {sp: "recibir", en: "to receive"},
                {sp: "discutir", en: "to argue"},
                {sp: "interrumpir", en: "to interrupt"},
                {sp: "subir", en: "to go up"},
                {sp: "vivir", en: "to live"}
            ],
            stemChanging: [
                {sp: "cerrar", en: "to close (e‚Üíie)"},
                {sp: "cerrar con llave", en: "to lock (e‚Üíie)"},
                {sp: "comenzar", en: "to start (e‚Üíie)"},
                {sp: "comenzar a", en: "to start doing something (e‚Üíie)"},
                {sp: "empezar", en: "to start (e‚Üíie)"},
                {sp: "empezar a", en: "to start doing something (e‚Üíie)"},
                {sp: "pensar", en: "to think (e‚Üíie)"},
                {sp: "entender", en: "to understand (e‚Üíie)"},
                {sp: "perder", en: "to lose, to waste time, to miss (e‚Üíie)"},
                {sp: "querer", en: "to want (e‚Üíie)"},
                {sp: "querer + infinitivo", en: "to want to do something (e‚Üíie)"},
                {sp: "querer a", en: "to love someone (e‚Üíie)"},
                {sp: "mentir", en: "to lie (e‚Üíie)"},
                {sp: "preferir", en: "to prefer (e‚Üíie)"},
                {sp: "almorzar", en: "to have lunch (o‚Üíue)"},
                {sp: "contar", en: "to count, to tell (o‚Üíue)"},
                {sp: "costar", en: "to cost (o‚Üíue)"},
                {sp: "encontrar", en: "to find (o‚Üíue)"},
                {sp: "jugar", en: "to play (u‚Üíue)"},
                {sp: "mostrar", en: "to show (o‚Üíue)"},
                {sp: "probar", en: "to taste (food) (o‚Üíue)"},
                {sp: "recordar", en: "to remember (o‚Üíue)"},
                {sp: "so√±ar (con)", en: "to dream about (o‚Üíue)"},
                {sp: "devolver", en: "to give back (o‚Üíue)"},
                {sp: "poder", en: "to be able to, can (o‚Üíue)"},
                {sp: "volver", en: "to come back (o‚Üíue)"},
                {sp: "dormir", en: "to sleep (o‚Üíue)"},
                {sp: "pedir", en: "to ask for (e‚Üíi)"},
                {sp: "repetir", en: "to repeat (e‚Üíi)"},
                {sp: "seguir", en: "to follow (e‚Üíi)"},
                {sp: "seguir + gerundio", en: "to continue doing something (e‚Üíi)"},
                {sp: "servir", en: "to serve (e‚Üíi)"},
                {sp: "sonre√≠r", en: "to smile (e‚Üíi)"},
                {sp: "re√≠r", en: "to laugh (e‚Üíi)"}
            ],
            irregularVerbs: [
                {sp: "merecer", en: "to deserve (yo: merezco)"},
                {sp: "obedecer", en: "to obey (yo: obedezco)"},
                {sp: "ofrecer", en: "to offer (yo: ofrezco)"},
                {sp: "pertenecer", en: "to belong (yo: pertenezco)"},
                {sp: "conducir", en: "to drive (yo: conduzco)"},
                {sp: "traducir", en: "to translate (yo: traduzco)"},
                {sp: "conocer", en: "to know people/places (yo: conozco)"},
                {sp: "dar", en: "to give (yo: doy)"},
                {sp: "hacer", en: "to do, to make (yo: hago)"},
                {sp: "poner", en: "to put (yo: pongo)"},
                {sp: "traer", en: "to bring (yo: traigo)"},
                {sp: "salir", en: "to go out (yo: salgo)"},
                {sp: "saber", en: "to know facts/information (yo: s√©)"},
                {sp: "ver", en: "to see (yo: veo)"},
                {sp: "decir", en: "to say, to tell (yo: digo)"},
                {sp: "venir", en: "to come (yo: vengo)"},
                {sp: "ser", en: "to be (permanent)"},
                {sp: "estar", en: "to be (temporary/location)"},
                {sp: "ir", en: "to go"},
                {sp: "tener", en: "to have"}
            ],
            reflexiveVerbs: [
                {sp: "despertarse", en: "to wake up (e‚Üíie)"},
                {sp: "sentarse", en: "to sit down (e‚Üíie)"},
                {sp: "acostarse", en: "to go to bed (o‚Üíue)"},
                {sp: "dormirse", en: "to fall asleep (o‚Üíue)"},
                {sp: "darse prisa", en: "to hurry up"},
                {sp: "reunirse (con)", en: "to gather, to meet"},
                {sp: "afeitarse", en: "to shave"},
                {sp: "ba√±arse", en: "to shower"},
                {sp: "burlarse de", en: "to make fun of"},
                {sp: "darse cuenta de", en: "to realize"},
                {sp: "cepillarse", en: "to brush"},
                {sp: "cortarse", en: "to cut (oneself)"},
                {sp: "equivocarse", en: "to make a mistake"},
                {sp: "portarse bien", en: "to behave"},
                {sp: "portarse mal", en: "to misbehave"},
                {sp: "quejarse (de)", en: "to complain"},
                {sp: "lavarse", en: "to wash (oneself)"},
                {sp: "peinarse", en: "to comb"},
                {sp: "prepararse", en: "to get ready"},
                {sp: "quitarse", en: "to take off (clothing)"},
                {sp: "secarse", en: "to dry (oneself)"},
                {sp: "vestirse", en: "to get dressed (e‚Üíi)"},
                {sp: "desvestirse", en: "to get undressed"},
                {sp: "ponerse", en: "to put on"},
                {sp: "aburrirse", en: "to get bored"},
                {sp: "alegrarse (de)", en: "to get happy"},
                {sp: "cansarse (de)", en: "to get tired"},
                {sp: "divertirse", en: "to have fun (e‚Üíie)"},
                {sp: "enfadarse (con)", en: "to get angry"},
                {sp: "enojarse (con)", en: "to get angry"},
                {sp: "impacientarse", en: "to get impatient"},
                {sp: "irritarse", en: "to get irritated"},
                {sp: "preocuparse", en: "to get worried"},
                {sp: "sentirse", en: "to feel (e‚Üíie)"},
                {sp: "mudarse", en: "to move (housing)"},
                {sp: "callarse", en: "to be quiet, to shut up"},
                {sp: "quedarse", en: "to stay"},
                {sp: "despedirse", en: "to say goodbye (e‚Üíi)"},
                {sp: "irse", en: "to leave, to go"},
                {sp: "marcharse", en: "to leave"}
            ],
            bodyParts: [
                {sp: "brazo", en: "arm"},
                {sp: "cuerpo", en: "body"},
                {sp: "oreja", en: "ear"},
                {sp: "ojo", en: "eye"},
                {sp: "cara", en: "face"},
                {sp: "pie/pies", en: "foot/feet"},
                {sp: "dedo", en: "finger"},
                {sp: "pelo", en: "hair"},
                {sp: "mano", en: "hand"},
                {sp: "cabeza", en: "head"},
                {sp: "pierna", en: "leg"},
                {sp: "boca", en: "mouth"},
                {sp: "cuello", en: "neck"},
                {sp: "nariz", en: "nose"},
                {sp: "est√≥mago", en: "stomach"},
                {sp: "diente/dientes", en: "tooth/teeth"},
                {sp: "tobillo", en: "ankle"},
                {sp: "espalda", en: "back"},
                {sp: "vejiga", en: "bladder"},
                {sp: "sangre", en: "blood"},
                {sp: "hueso", en: "bone"},
                {sp: "coraz√≥n", en: "heart"},
                {sp: "cadera", en: "hip"},
                {sp: "mand√≠bula", en: "jaw"},
                {sp: "ri√±√≥n", en: "kidney"},
                {sp: "rodilla", en: "knee"}
            ],
            food: [
                {sp: "carne", en: "meat"},
                {sp: "bistec", en: "steak"},
                {sp: "camarones", en: "shrimp"},
                {sp: "pan", en: "bread"},
                {sp: "arroz", en: "rice"},
                {sp: "frijoles", en: "beans"},
                {sp: "pollo", en: "chicken"},
                {sp: "jam√≥n", en: "ham"},
                {sp: "mariscos", en: "seafood"},
                {sp: "pescado", en: "fish"},
                {sp: "tocino", en: "bacon"},
                {sp: "chorizo", en: "sausage"},
                {sp: "lentejas", en: "lentils"},
                {sp: "sopa", en: "soup"},
                {sp: "mantequilla", en: "butter"},
                {sp: "mermelada", en: "jelly, marmalade"},
                {sp: "sal", en: "salt"},
                {sp: "pimienta", en: "pepper"},
                {sp: "huevos", en: "eggs"},
                {sp: "hielo", en: "ice"},
                {sp: "helado", en: "ice cream"},
                {sp: "galleta", en: "cookie"},
                {sp: "panqueque", en: "pancake"},
                {sp: "fideos", en: "noodles"},
                {sp: "leche", en: "milk"},
                {sp: "jugo", en: "juice"},
                {sp: "naranja", en: "orange"},
                {sp: "pera", en: "pear"},
                {sp: "manzana", en: "apple"},
                {sp: "fresa", en: "strawberry"},
                {sp: "uva", en: "grape"},
                {sp: "pl√°tano/banana", en: "banana"},
                {sp: "ar√°ndanos", en: "blueberries"},
                {sp: "agua", en: "water"},
                {sp: "caf√©", en: "coffee"},
                {sp: "gaseosa/soda", en: "soda"},
                {sp: "limonada", en: "lemonade"},
                {sp: "t√©", en: "tea"},
                {sp: "cuchara", en: "spoon"},
                {sp: "cuchillo", en: "knife"},
                {sp: "cucharita", en: "teaspoon"},
                {sp: "tenedor", en: "fork"},
                {sp: "vaso", en: "glass"},
                {sp: "servilleta", en: "napkin"},
                {sp: "taza", en: "cup"},
                {sp: "plato", en: "plate"},
                {sp: "taz√≥n", en: "bowl"},
                {sp: "esp√°tula", en: "spatula"},
                {sp: "mantel", en: "tablecloth"},
                {sp: "pizza", en: "pizza"},
                {sp: "papitas", en: "chips"},
                {sp: "pastel", en: "cake"},
                {sp: "s√°ndwiches", en: "sandwiches"},
                {sp: "refrescos", en: "drinks"}
            ],
            clothing: [
                {sp: "abrigo", en: "coat"},
                {sp: "pantalones", en: "pants"},
                {sp: "bota(s)", en: "boot(s)"},
                {sp: "zapatos", en: "shoes"},
                {sp: "camisa", en: "shirt"},
                {sp: "falda", en: "skirt"},
                {sp: "camiseta", en: "t-shirt"},
                {sp: "corbata", en: "tie"},
                {sp: "pijama", en: "pajamas"},
                {sp: "chaleco", en: "vest"},
                {sp: "traje", en: "suit"},
                {sp: "vestido", en: "dress"},
                {sp: "gorro", en: "hat"},
                {sp: "sombrero", en: "hat"},
                {sp: "shorts", en: "shorts"},
                {sp: "ropa de ba√±o", en: "bathing suit"},
                {sp: "blusa", en: "blouse"},
                {sp: "medias/calcetines", en: "socks"},
                {sp: "chaqueta", en: "jacket"},
                {sp: "bufanda", en: "scarf"},
                {sp: "guante(s)", en: "glove(s)"},
                {sp: "sandalia(s)", en: "sandal(s)"}
            ],
            places: [
                {sp: "librer√≠a", en: "bookstore"},
                {sp: "biblioteca", en: "library"},
                {sp: "supermercado", en: "supermarket"},
                {sp: "centro comercial", en: "mall"},
                {sp: "farmacia", en: "pharmacy"},
                {sp: "lavander√≠a", en: "laundromat"},
                {sp: "panader√≠a", en: "bakery"},
                {sp: "museo", en: "museum"},
                {sp: "estadio", en: "stadium"},
                {sp: "discoteca", en: "dancing club"},
                {sp: "parque", en: "park"},
                {sp: "peluquer√≠a", en: "hair salon"},
                {sp: "mercado", en: "market"},
                {sp: "acuario", en: "aquarium"},
                {sp: "iglesia", en: "church"},
                {sp: "estacionamiento", en: "parking lot"},
                {sp: "plaza", en: "plaza"},
                {sp: "cementerio", en: "cemetery"},
                {sp: "banco", en: "bank"},
                {sp: "cl√≠nica", en: "clinic"},
                {sp: "hospital", en: "hospital"},
                {sp: "estaci√≥n", en: "station"},
                {sp: "caf√©", en: "caf√©"},
                {sp: "cine", en: "movie theater"},
                {sp: "playa", en: "beach"}
            ],
            chores: [
                {sp: "pasar la aspiradora", en: "to vacuum"},
                {sp: "sacar la basura", en: "to take out the trash"},
                {sp: "lavar los platos", en: "to wash the dishes"},
                {sp: "fregar los platos", en: "to wash the dishes"},
                {sp: "lavar la ropa", en: "to wash clothes"},
                {sp: "doblar la ropa", en: "to fold clothes"},
                {sp: "planchar", en: "to iron"},
                {sp: "cortar el c√©sped", en: "to cut the grass"},
                {sp: "arreglar el dormitorio", en: "to fix the bedroom"},
                {sp: "hacer la cama", en: "to make the bed"},
                {sp: "trapear", en: "to mop"},
                {sp: "sacar a pasear al perro", en: "to walk the dog"},
                {sp: "dar de comer al perro", en: "to feed the dog"},
                {sp: "preparar el desayuno", en: "to prepare breakfast"},
                {sp: "preparar el almuerzo", en: "to prepare lunch"},
                {sp: "preparar la cena", en: "to prepare dinner"},
                {sp: "secar la ropa", en: "to dry the clothes"},
                {sp: "secar los platos", en: "to dry the dishes"},
                {sp: "regar las plantas", en: "to water the plants"},
                {sp: "cuidar el jard√≠n", en: "to take care of the garden"},
                {sp: "lavar el coche", en: "to wash the car"},
                {sp: "limpiar el ba√±o", en: "to clean the bathroom"},
                {sp: "limpiar la sala", en: "to clean the living room"},
                {sp: "quitar la mesa", en: "to clear the table"},
                {sp: "poner la mesa", en: "to set the table"},
                {sp: "quitar el polvo", en: "to dust the furniture"},
                {sp: "sacudir la alfombra", en: "to shake the rug"},
                {sp: "barrer", en: "to sweep"}
            ],
            sports: [
                {sp: "b√°squetbol", en: "basketball"},
                {sp: "b√©isbol", en: "baseball"},
                {sp: "f√∫tbol americano", en: "American football"},
                {sp: "f√∫tbol", en: "soccer"},
                {sp: "nadar", en: "to swim"},
                {sp: "nataci√≥n", en: "swimming"},
                {sp: "patinar", en: "to skate"},
                {sp: "patinar sobre hielo", en: "to ice skate"},
                {sp: "tenis", en: "tennis"},
                {sp: "voleibol", en: "volleyball"},
                {sp: "esgrima", en: "fencing"},
                {sp: "atletismo", en: "track and field"},
                {sp: "bate", en: "bat"},
                {sp: "casco", en: "helmet"},
                {sp: "guante", en: "glove"},
                {sp: "patines", en: "skates"},
                {sp: "pelota", en: "ball"},
                {sp: "raqueta", en: "racket"},
                {sp: "partido", en: "match, game"},
                {sp: "peligroso", en: "dangerous"},
                {sp: "aficionados", en: "fans"},
                {sp: "atleta", en: "athlete"},
                {sp: "campe√≥n", en: "champion"},
                {sp: "campo", en: "field"},
                {sp: "cancha", en: "court"},
                {sp: "equipo", en: "team"},
                {sp: "estadio", en: "stadium"},
                {sp: "ganador", en: "winner"},
                {sp: "jugador", en: "player"},
                {sp: "piscina", en: "pool"},
                {sp: "comprender", en: "to understand"},
                {sp: "reglas", en: "rules"},
                {sp: "favorito", en: "favorite"},
                {sp: "ganar", en: "to win"},
                {sp: "perder", en: "to lose"}
            ],
            party: [
                {sp: "bailar", en: "to dance"},
                {sp: "celebrar", en: "to celebrate"},
                {sp: "cantar", en: "to sing"},
                {sp: "dar una fiesta", en: "to throw a party"},
                {sp: "decoraciones", en: "decorations"},
                {sp: "decorar", en: "to decorate"},
                {sp: "fiesta sorpresa", en: "surprise party"},
                {sp: "globo", en: "balloon"},
                {sp: "invitados", en: "guests"},
                {sp: "invitaci√≥n", en: "invitation"},
                {sp: "invitar a", en: "to invite someone"},
                {sp: "salir", en: "to go out"},
                {sp: "secreto", en: "secret"},
                {sp: "venir", en: "to come"},
                {sp: "abrir", en: "to open"},
                {sp: "buscar", en: "to look for"},
                {sp: "envolver", en: "to wrap (o‚Üíue)"},
                {sp: "papel de regalo", en: "wrapping paper"},
                {sp: "bolsa de regalo", en: "gift bag"},
                {sp: "recibir", en: "to receive"},
                {sp: "regalo", en: "gift, present"},
                {sp: "traer", en: "to bring"},
                {sp: "dar", en: "to give"},
                {sp: "decir", en: "to say"},
                {sp: "poner", en: "to put"}
            ],
            expressions: [
                {sp: "tener a√±os", en: "to be X years old"},
                {sp: "tener suerte", en: "to be lucky"},
                {sp: "tener que", en: "to have to do something"},
                {sp: "tener ganas de", en: "to feel like doing something"},
                {sp: "tener calor", en: "to be hot"},
                {sp: "tener fr√≠o", en: "to be cold"},
                {sp: "tener hambre", en: "to be hungry"},
                {sp: "tener sed", en: "to be thirsty"},
                {sp: "tener raz√≥n", en: "to be right"},
                {sp: "tener cuidado", en: "to be careful"},
                {sp: "tener sue√±o", en: "to be sleepy"},
                {sp: "tener celos", en: "to be jealous"},
                {sp: "tener verg√ºenza", en: "to be embarrassed, to be ashamed"},
                {sp: "tener miedo", en: "to be scared"},
                {sp: "tener la culpa", en: "to be guilty"},
                {sp: "tener prisa", en: "to be in a hurry"},
                {sp: "tener √©xito", en: "to be successful"},
                {sp: "tener dolor de", en: "to have pain"},
                {sp: "estar triste", en: "to be sad"},
                {sp: "estar cansado", en: "to be tired"},
                {sp: "estar preocupado", en: "to be worried"},
                {sp: "estar enfermo", en: "to be sick"},
                {sp: "estar contento", en: "to be happy"},
                {sp: "estar enamorado", en: "to be in love"},
                {sp: "estar furioso", en: "to be furious"},
                {sp: "estar aburrido", en: "to be bored"},
                {sp: "estar de buen humor", en: "to be in a good mood"},
                {sp: "estar de mal humor", en: "to be in a bad mood"},
                {sp: "estar celoso", en: "to be jealous"},
                {sp: "estar ocupado", en: "to be busy"},
                {sp: "estar muerto", en: "to be dead"},
                {sp: "estar embarazada", en: "to be pregnant"},
                {sp: "hay", en: "there is, there are"},
                {sp: "siempre", en: "always"},
                {sp: "nunca", en: "never"},
                {sp: "a veces", en: "sometimes"},
                {sp: "a menudo", en: "often"},
                {sp: "de vez en cuando", en: "once in a while"},
                {sp: "todos los d√≠as", en: "every day"},
                {sp: "tambi√©n", en: "too, as well"},
                {sp: "despu√©s", en: "after, then"},
                {sp: "luego", en: "then, later"},
                {sp: "adem√°s", en: "furthermore, also, besides"},
                {sp: "otra vez", en: "again"},
                {sp: "m√°s", en: "more"},
                {sp: "pero", en: "but"},
                {sp: "sin embargo", en: "however"},
                {sp: "porque", en: "because"},
                {sp: "por lo tanto", en: "therefore"},
                {sp: "finalmente", en: "finally"},
                {sp: "por √∫ltimo", en: "lastly"}
            ]
        };

        // Combine all vocabulary
        let allVocab = [];
        for (let category in vocabData) {
            allVocab = allVocab.concat(vocabData[category]);
        }

        // Quiz variables
        let quizData = [];
        let currentQuizIndex = 0;
        let quizScore = 0;
        let quizTotal = 0;
        let currentAnswer = '';
        let currentQuestion = null;
        let attemptCount = 0;
        let hasChecked = false;
        let wrongAnswers = []; // Track wrong answers
        let isPracticingWrongAnswers = false;

        // LocalStorage functions
        function saveProgress() {
            const masteredWords = [];
            document.querySelectorAll('.vocab-card.mastered').forEach(card => {
                masteredWords.push(card.dataset.spanish);
            });

            const progressData = {
                masteredWords: masteredWords,
                quizScore: quizScore,
                quizTotal: quizTotal,
                lastUpdated: new Date().toISOString()
            };

            localStorage.setItem('spanish3Progress', JSON.stringify(progressData));
            updateProgressDisplay();
        }

        function loadProgress() {
            const saved = localStorage.getItem('spanish3Progress');
            if (saved) {
                const progressData = JSON.parse(saved);

                progressData.masteredWords.forEach(spanish => {
                    const card = document.querySelector(`[data-spanish="${spanish}"]`);
                    if (card) {
                        card.classList.add('mastered');
                    }
                });

                quizScore = progressData.quizScore || 0;
                quizTotal = progressData.quizTotal || 0;

                updateProgressDisplay();
            }
        }

        function getMasteredWords() {
            const masteredWords = new Set();
            document.querySelectorAll('.vocab-card.mastered').forEach(card => {
                masteredWords.add(card.dataset.spanish);
            });
            return masteredWords;
        }

        function updateProgressDisplay() {
            const masteredCount = document.querySelectorAll('.vocab-card.mastered').length;
            document.getElementById('mastered').textContent = masteredCount;
            document.getElementById('mastered-count').textContent = masteredCount;
            document.getElementById('total-quiz-score').textContent = quizScore + '/' + quizTotal;

            const progress = (masteredCount / allVocab.length) * 100;
            document.getElementById('progress-all').style.width = progress + '%';
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset ALL progress? This cannot be undone!')) {
                localStorage.removeItem('spanish3Progress');
                document.querySelectorAll('.vocab-card').forEach(card => {
                    card.classList.remove('mastered');
                });
                quizScore = 0;
                quizTotal = 0;
                wrongAnswers = [];
                updateProgressDisplay();
                alert('Progress reset successfully! ‚ú®');
            }
        }

        // Initialize vocabulary displays
        function initVocab() {
            createVocabCards('all', allVocab);
            createVocabCards('regular', vocabData.regularVerbs);
            createVocabCards('stem', vocabData.stemChanging);
            createVocabCards('irregular', vocabData.irregularVerbs);
            createVocabCards('reflexive', vocabData.reflexiveVerbs);
            createVocabCards('body', vocabData.bodyParts);
            createVocabCards('food', vocabData.food);
            createVocabCards('clothes', vocabData.clothing);
            createVocabCards('places', vocabData.places);
            createVocabCards('chores', vocabData.chores);
            createVocabCards('sports', vocabData.sports);
            createVocabCards('party', vocabData.party);
            createVocabCards('expressions', vocabData.expressions);

            loadProgress();
        }

        function createVocabCards(section, data) {
            const container = document.getElementById('vocab-' + section);
            container.innerHTML = '';

            data.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'vocab-card';
                card.dataset.spanish = item.sp.toLowerCase();
                card.dataset.english = item.en.toLowerCase();
                card.innerHTML = `
                    <span class="reveal-hint">üëÜ</span>
                    <div class="spanish">${item.sp}</div>
                    <div class="english">${item.en}</div>
                `;

                card.onclick = function() {
                    this.classList.toggle('revealed');
                };

                card.ondblclick = function(e) {
                    e.stopPropagation();
                    this.classList.toggle('mastered');
                    saveProgress();
                };

                container.appendChild(card);
            });
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }

        function revealAll(section) {
            document.querySelectorAll('#vocab-' + section + ' .vocab-card').forEach(card => {
                card.classList.add('revealed');
            });
        }

        function hideAll(section) {
            document.querySelectorAll('#vocab-' + section + ' .vocab-card').forEach(card => {
                card.classList.remove('revealed');
            });
        }

        function shuffleCards(section) {
            const container = document.getElementById('vocab-' + section);
            const cards = Array.from(container.children);
            cards.sort(() => Math.random() - 0.5);
            container.innerHTML = '';
            cards.forEach(card => container.appendChild(card));
        }

        function searchVocab(section) {
            const searchTerm = document.getElementById('search-' + section).value.toLowerCase();
            const cards = document.querySelectorAll('#vocab-' + section + ' .vocab-card');

            cards.forEach(card => {
                const spanish = card.dataset.spanish;
                const english = card.dataset.english;

                if (spanish.includes(searchTerm) || english.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Enhanced Quiz Mode Functions
        function nextQuestion() {
            if (!isPracticingWrongAnswers) {
                if (quizData.length === 0) {
                    // Filter out mastered words
                    const masteredWords = getMasteredWords();
                    const availableVocab = allVocab.filter(item => !masteredWords.has(item.sp.toLowerCase()));

                    if (availableVocab.length === 0) {
                        alert('Amazing! You\'ve mastered all words! üéâ Reset progress to quiz again.');
                        return;
                    }

                    quizData = [...availableVocab].sort(() => Math.random() - 0.5);
                }

                if (currentQuizIndex >= quizData.length) {
                    currentQuizIndex = 0;
                    const masteredWords = getMasteredWords();
                    const availableVocab = allVocab.filter(item => !masteredWords.has(item.sp.toLowerCase()));
                    quizData = [...availableVocab].sort(() => Math.random() - 0.5);
                }
            } else {
                if (currentQuizIndex >= quizData.length) {
                    finishQuiz();
                    return;
                }
            }

            currentQuestion = quizData[currentQuizIndex];
            currentAnswer = currentQuestion.en.toLowerCase();
            attemptCount = 0;
            hasChecked = false;

            document.getElementById('quiz-question').textContent = 'Translate: ' + currentQuestion.sp;
            document.getElementById('quiz-answer').value = '';

            const feedback = document.getElementById('quiz-feedback');
            feedback.style.display = 'none';
            feedback.className = 'feedback';

            document.getElementById('next-btn').disabled = true;
            document.getElementById('check-btn').disabled = true;

            currentQuizIndex++;

            const progress = (currentQuizIndex / quizData.length) * 100;
            document.getElementById('quiz-progress').style.width = progress + '%';
        }

        function checkQuizAnswer() {
            const userAnswer = document.getElementById('quiz-answer').value.trim().toLowerCase();
            const feedback = document.getElementById('quiz-feedback');

            attemptCount++;

            const isCorrect = userAnswer === currentAnswer || 
                             (currentAnswer.includes(userAnswer) && userAnswer.length > 3) ||
                             currentAnswer.split(',').some(ans => ans.trim() === userAnswer);

            if (isCorrect) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = '‚úÖ <strong>Correct!</strong> Amazing! üéâ<br>Translation: ' + currentAnswer;
                feedback.style.display = 'block';
                quizScore++;
                quizTotal++;
                document.getElementById('next-btn').disabled = false;
                document.getElementById('check-btn').disabled = true;
                hasChecked = true;
                saveProgress();
            } else if (attemptCount === 1) {
                feedback.className = 'feedback hint';
                const hint = currentAnswer.substring(0, 3) + '...';
                feedback.innerHTML = 'üí° <strong>Hint:</strong> Starts with "' + hint + '"<br>Try again!';
                feedback.style.display = 'block';
                document.getElementById('check-btn').disabled = true;
                hasChecked = false;
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = '‚ùå <strong>Incorrect.</strong> Answer: <strong>' + currentAnswer + '</strong><br>Keep practicing!';
                feedback.style.display = 'block';
                quizTotal++;

                // Add to wrong answers
                wrongAnswers.push({
                    question: currentQuestion.sp,
                    userAnswer: userAnswer,
                    correctAnswer: currentAnswer
                });

                document.getElementById('next-btn').disabled = false;
                document.getElementById('check-btn').disabled = true;
                hasChecked = true;
                saveProgress();
            }

            document.getElementById('quiz-score').textContent = quizScore;
            document.getElementById('quiz-total').textContent = quizTotal;

            const accuracy = quizTotal > 0 ? Math.round((quizScore / quizTotal) * 100) : 0;
            document.getElementById('quiz-accuracy').textContent = accuracy + '%';
        }

        function finishQuiz() {
            document.getElementById('quiz-active').style.display = 'none';
            document.getElementById('quiz-results').style.display = 'block';

            document.getElementById('final-score').textContent = quizScore;
            document.getElementById('final-total').textContent = quizTotal;
            const finalAccuracy = quizTotal > 0 ? Math.round((quizScore / quizTotal) * 100) : 0;
            document.getElementById('final-accuracy').textContent = finalAccuracy;

            document.getElementById('wrong-count').textContent = wrongAnswers.length;

            const wrongList = document.getElementById('wrong-answers-list');
            wrongList.innerHTML = '';

            if (wrongAnswers.length === 0) {
                wrongList.innerHTML = '<p style="text-align: center; font-size: 1.3em; color: #20bf6b;">üéâ Perfect! No wrong answers!</p>';
            } else {
                wrongAnswers.forEach((item, index) => {
                    const div = document.createElement('div');
                    div.className = 'wrong-answer-item';
                    div.innerHTML = `
                        <div class="question"><strong>${index + 1}.</strong> ${item.question}</div>
                        <p><span class="your-answer">Your answer:</span> ${item.userAnswer || '(no answer)'}</p>
                        <p><span class="correct-answer">Correct answer:</span> ${item.correctAnswer}</p>
                    `;
                    wrongList.appendChild(div);
                });
            }
        }

        function redoQuiz() {
            wrongAnswers = [];
            quizScore = 0;
            quizTotal = 0;
            currentQuizIndex = 0;
            quizData = [];
            isPracticingWrongAnswers = false;

            document.getElementById('quiz-results').style.display = 'none';
            document.getElementById('quiz-active').style.display = 'block';

            document.getElementById('quiz-score').textContent = '0';
            document.getElementById('quiz-total').textContent = '0';
            document.getElementById('quiz-accuracy').textContent = '0%';

            nextQuestion();
        }

        function practiceWrongAnswers() {
            if (wrongAnswers.length === 0) {
                alert('No wrong answers to practice! üéâ');
                return;
            }

            isPracticingWrongAnswers = true;
            currentQuizIndex = 0;

            // Create quiz data from wrong answers
            quizData = wrongAnswers.map(item => ({
                sp: item.question,
                en: item.correctAnswer
            })).sort(() => Math.random() - 0.5);

            // Reset for practice session
            const tempScore = quizScore;
            const tempTotal = quizTotal;
            wrongAnswers = [];
            quizScore = 0;
            quizTotal = 0;

            document.getElementById('quiz-results').style.display = 'none';
            document.getElementById('quiz-active').style.display = 'block';

            document.getElementById('quiz-score').textContent = '0';
            document.getElementById('quiz-total').textContent = '0';
            document.getElementById('quiz-accuracy').textContent = '0%';

            // Restore totals after practice
            setTimeout(() => {
                if (isPracticingWrongAnswers) {
                    quizScore += tempScore;
                    quizTotal += tempTotal;
                }
            }, 100);

            nextQuestion();
        }

        function backToQuiz() {
            wrongAnswers = [];
            currentQuizIndex = 0;
            quizData = [];
            isPracticingWrongAnswers = false;

            document.getElementById('quiz-results').style.display = 'none';
            document.getElementById('quiz-active').style.display = 'block';

            nextQuestion();
        }

        function handleEnter(event) {
            if (event.key === 'Enter') {
                const checkBtn = document.getElementById('check-btn');
                const nextBtn = document.getElementById('next-btn');

                if (!checkBtn.disabled) {
                    checkQuizAnswer();
                } else if (!nextBtn.disabled) {
                    nextQuestion();
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const quizInput = document.getElementById('quiz-answer');
            if (quizInput) {
                quizInput.addEventListener('input', function() {
                    const checkBtn = document.getElementById('check-btn');
                    if (this.value.trim().length > 0 && !hasChecked) {
                        checkBtn.disabled = false;
                    } else if (this.value.trim().length === 0) {
                        checkBtn.disabled = true;
                    }
                });
            }
        });

        window.onload = function() {
            initVocab();
            nextQuestion();
        };
    </script>
</body>
</html>
